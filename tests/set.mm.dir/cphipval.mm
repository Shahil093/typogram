include "ccph.mm"
include "wcel.mm"
include "ci.mm"
include "wa.mm"
include "w3a.mm"
include "co.mm"
include "cfv.mm"
include "c2.mm"
include "cexp.mm"
include "csg.mm"
include "cmin.mm"
include "cmul.mm"
include "caddc.mm"
include "c4.mm"
include "cdiv.mm"
include "c1.mm"
include "cfz.mm"
include "cv.mm"
include "csu.mm"
include "eqid.mm"
include "cphipval2.mm"
include "cneg.mm"
include "cc.mm"
include "wceq.mm"
include "ax-icn.mm"
include "a1i.mm"
include "simp1l.mm"
include "cgrp.mm"
include "cngp.mm"
include "cphngp.mm"
include "ngpgrp.mm"
include "syl.mm"
include "adantr.mm"
include "3ad2ant1.mm"
include "simp2.mm"
include "clmod.mm"
include "cphlmod.mm"
include "3anim1i.mm"
include "3expa.mm"
include "lmodvscl.mm"
include "3adant2.mm"
include "grpcl.mm"
include "syl3anc.mm"
include "nmsq.mm"
include "syl2anc.mm"
include "cr.mm"
include "reipcl.mm"
include "recnd.mm"
include "eqeltrd.mm"
include "mulcld.mm"
include "cclm.mm"
include "cphclm.mm"
include "clmneg1.mm"
include "simp3.mm"
include "addneg1mul.mm"
include "clmvsubval.mm"
include "eqcomd.mm"
include "syl3an1.mm"
include "fveq2d.mm"
include "oveq1d.mm"
include "oveq2d.mm"
include "eqtrd.mm"
include "cminusg.mm"
include "simp1r.mm"
include "clmvsneg.mm"
include "grpsubval.mm"
include "eqtr4d.mm"
include "oveq12d.mm"
include "anim1i.mm"
include "clmvs1.mm"
include "mulid2d.mm"
include "cn.mm"
include "c3.mm"
include "nnuz.mm"
include "df-4.mm"
include "oveq2.mm"
include "i4.mm"
include "syl6eq.mm"
include "nnnn0.mm"
include "expcld.mm"
include "adantl.mm"
include "cmodscexp.mm"
include "sylan.mm"
include "df-3.mm"
include "i3.mm"
include "cn0.mm"
include "df-2.mm"
include "i2.mm"
include "cz.mm"
include "1z.mm"
include "exp1.mm"
include "ax-mp.mm"
include "fsum1.mm"
include "sylancr.mm"
include "1nn.mm"
include "jctil.mm"
include "eqidd.mm"
include "fsump1i.mm"
include "simprd.mm"
include "grpsubcl.mm"
include "subcld.mm"
include "addcomd.mm"
include "subadd23d.mm"
include "subdir2d.mm"
include "sub32d.mm"
include "3eqtr2d.mm"
include "negsubd.mm"
include "mulneg1d.mm"
include "eqtr3d.mm"
include "3eqtr4rd.mm"

theorem cphipval
  let cA: class A
  let cB: class B
  let c.pl: class .+
  let c.x: class .x.
  let vk: setvar k
  let cF: class F
  let c.xi: class .,
  let cK: class K
  let cN: class N
  let cW: class W
  let cX: class X
  assume cphipfval.x: |- X = ( Base ` W )
  assume cphipfval.p: |- .+ = ( +g ` W )
  assume cphipfval.s: |- .x. = ( .s ` W )
  assume cphipfval.n: |- N = ( norm ` W )
  assume cphipfval.i: |- ., = ( .i ` W )
  assume cphipval.f: |- F = ( Scalar ` W )
  assume cphipval.k: |- K = ( Base ` F )

  disjoint N k
  disjoint A k
  disjoint B k
  disjoint X k
  disjoint K k
  disjoint W k
  disjoint .+ k
  disjoint .x. k
  assert |- ( ( ( W e. CPreHil /\ _i e. K ) /\ A e. X /\ B e. X ) -> ( A ., B ) = ( sum_ k e. ( 1 ... 4 ) ( ( _i ^ k ) x. ( ( N ` ( A .+ ( ( _i ^ k ) .x. B ) ) ) ^ 2 ) ) / 4 ) )

  proof
    cW
    ccph
    wcel
    #
    ci
    cK
    wcel
    #
    wa
    #
    cA
    cX
    wcel
    #
    cB
    cX
    wcel
    #
    w3a
    #
    cA
    cB
    c.xi
    co
    cA
    cB
    c.pl
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cA
    cB
    cW
    csg
    cfv
    #
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cmin
    co
    #
    ci
    cA
    ci
    cB
    c.x
    co
    #
    c.pl
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cA
    @14
    @9
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cmin
    co
    #
    cmul
    co
    #
    caddc
    co
    #
    c4
    cdiv
    co
    c1
    c4
    cfz
    co
    ci
    vk
    cv
    #
    cexp
    co
    #
    cA
    @25
    cB
    c.x
    co
    #
    c.pl
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cmul
    co
    #
    vk
    csu
    #
    c4
    cdiv
    co
    cA
    cB
    c.pl
    c.x
    cF
    c.xi
    cK
    @9
    cN
    cW
    cX
    cphipfval.x
    cphipfval.p
    cphipfval.s
    cphipfval.n
    cphipfval.i
    @9
    eqid
    #
    cphipval.f
    cphipval.k
    cphipval2
    @5
    @23
    @31
    c4
    cdiv
    @5
    ci
    @17
    cmul
    co
    #
    c1
    cneg
    #
    cA
    @34
    cB
    c.x
    co
    #
    c.pl
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cmul
    co
    #
    caddc
    co
    #
    ci
    cneg
    #
    cA
    @41
    cB
    c.x
    co
    #
    c.pl
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cmul
    co
    #
    caddc
    co
    #
    c1
    cA
    c1
    cB
    c.x
    co
    #
    c.pl
    co
    #
    cN
    cfv
    #
    c2
    cexp
    co
    #
    cmul
    co
    #
    caddc
    co
    #
    @33
    @12
    cmin
    co
    #
    @41
    @20
    cmul
    co
    #
    caddc
    co
    #
    @8
    caddc
    co
    #
    @31
    @23
    @5
    @47
    @56
    @52
    @8
    caddc
    @5
    @40
    @54
    @46
    @55
    caddc
    @5
    @40
    @33
    @38
    cmin
    co
    #
    @54
    @5
    @33
    cc
    wcel
    #
    @38
    cc
    wcel
    @40
    @58
    wceq
    @5
    ci
    @17
    ci
    cc
    wcel
    #
    @5
    ax-icn
    a1i
    #
    @5
    @17
    @15
    @15
    c.xi
    co
    #
    cc
    @5
    @0
    @15
    cX
    wcel
    #
    @17
    @62
    wceq
    @0
    @1
    @3
    @4
    simp1l
    #
    @5
    cW
    cgrp
    wcel
    #
    @3
    @14
    cX
    wcel
    #
    @63
    @2
    @3
    @65
    @4
    @0
    @65
    @1
    @0
    cW
    cngp
    wcel
    @65
    cW
    cphngp
    cW
    ngpgrp
    syl
    adantr
    #
    3ad2ant1
    #
    @2
    @3
    @4
    simp2
    #
    @2
    @4
    @66
    @3
    @2
    @4
    wa
    cW
    clmod
    wcel
    #
    @1
    @4
    w3a
    #
    @66
    @0
    @1
    @4
    @71
    @0
    @70
    @1
    @4
    cW
    cphlmod
    #
    3anim1i
    3expa
    ci
    c.x
    cF
    cK
    cX
    cW
    cB
    cphipfval.x
    cphipval.f
    cphipfval.s
    cphipval.k
    lmodvscl
    syl
    3adant2
    #
    cX
    c.pl
    cW
    cA
    @14
    cphipfval.x
    cphipfval.p
    grpcl
    syl3anc
    #
    @15
    c.xi
    cN
    cX
    cW
    cphipfval.x
    cphipfval.i
    cphipfval.n
    nmsq
    syl2anc
    @5
    @62
    @5
    @0
    @63
    @62
    cr
    wcel
    @64
    @74
    @15
    c.xi
    cX
    cW
    cphipfval.x
    cphipfval.i
    reipcl
    syl2anc
    recnd
    eqeltrd
    #
    mulcld
    #
    @5
    @38
    @5
    @38
    @36
    @36
    c.xi
    co
    #
    cr
    @5
    @0
    @36
    cX
    wcel
    #
    @38
    @77
    wceq
    @64
    @5
    @65
    @3
    @35
    cX
    wcel
    #
    @78
    @68
    @69
    @5
    @70
    @34
    cK
    wcel
    #
    @4
    @79
    @2
    @3
    @70
    @4
    @0
    @70
    @1
    @72
    adantr
    3ad2ant1
    #
    @2
    @3
    @80
    @4
    @0
    @80
    @1
    @0
    cW
    cclm
    wcel
    #
    @80
    cW
    cphclm
    #
    cF
    cK
    cW
    cphipval.f
    cphipval.k
    clmneg1
    syl
    adantr
    3ad2ant1
    @2
    @3
    @4
    simp3
    #
    @34
    c.x
    cF
    cK
    cX
    cW
    cB
    cphipfval.x
    cphipval.f
    cphipfval.s
    cphipval.k
    lmodvscl
    syl3anc
    cX
    c.pl
    cW
    cA
    @35
    cphipfval.x
    cphipfval.p
    grpcl
    syl3anc
    #
    @36
    c.xi
    cN
    cX
    cW
    cphipfval.x
    cphipfval.i
    cphipfval.n
    nmsq
    syl2anc
    @5
    @0
    @78
    @77
    cr
    wcel
    @64
    @85
    @36
    c.xi
    cX
    cW
    cphipfval.x
    cphipfval.i
    reipcl
    syl2anc
    eqeltrd
    recnd
    @33
    @38
    addneg1mul
    syl2anc
    @5
    @38
    @12
    @33
    cmin
    @5
    @37
    @11
    c2
    cexp
    @5
    @36
    @10
    cN
    @2
    @82
    @3
    @4
    @36
    @10
    wceq
    @0
    @82
    @1
    @83
    adantr
    #
    @82
    @3
    @4
    w3a
    @10
    @36
    cA
    cB
    c.pl
    c.x
    cF
    @9
    cX
    cW
    cphipfval.x
    cphipfval.p
    @32
    cphipval.f
    cphipfval.s
    clmvsubval
    eqcomd
    syl3an1
    fveq2d
    oveq1d
    oveq2d
    eqtrd
    @5
    @45
    @20
    @41
    cmul
    @5
    @44
    @19
    c2
    cexp
    @5
    @43
    @18
    cN
    @5
    @43
    cA
    @14
    cW
    cminusg
    cfv
    #
    cfv
    #
    c.pl
    co
    #
    @18
    @5
    @42
    @88
    cA
    c.pl
    @5
    @88
    @42
    @5
    cX
    ci
    c.x
    cF
    cK
    @87
    cW
    cB
    cphipfval.x
    cphipval.f
    cphipfval.s
    @87
    eqid
    #
    cphipval.k
    @2
    @3
    @82
    @4
    @86
    3ad2ant1
    @84
    @0
    @1
    @3
    @4
    simp1r
    clmvsneg
    eqcomd
    oveq2d
    @5
    @3
    @66
    @18
    @89
    wceq
    @69
    @73
    cX
    c.pl
    cW
    @87
    @9
    cA
    @14
    cphipfval.x
    cphipfval.p
    @90
    @32
    grpsubval
    syl2anc
    eqtr4d
    fveq2d
    oveq1d
    oveq2d
    oveq12d
    @5
    @52
    c1
    @8
    cmul
    co
    @8
    @5
    @51
    @8
    c1
    cmul
    @5
    @50
    @7
    c2
    cexp
    @5
    @49
    @6
    cN
    @5
    @48
    cB
    cA
    c.pl
    @5
    @82
    @4
    wa
    #
    @48
    cB
    wceq
    @2
    @4
    @91
    @3
    @2
    @82
    @4
    @86
    anim1i
    3adant2
    c.x
    cX
    cW
    cB
    cphipfval.x
    cphipfval.s
    clmvs1
    syl
    oveq2d
    fveq2d
    oveq1d
    oveq2d
    @5
    @8
    @5
    @8
    @5
    @8
    @6
    @6
    c.xi
    co
    #
    cr
    @5
    @0
    @6
    cX
    wcel
    #
    @8
    @92
    wceq
    @64
    @2
    @65
    @3
    @4
    @93
    @67
    cX
    c.pl
    cW
    cA
    cB
    cphipfval.x
    cphipfval.p
    grpcl
    syl3an1
    #
    @6
    c.xi
    cN
    cX
    cW
    cphipfval.x
    cphipfval.i
    cphipfval.n
    nmsq
    syl2anc
    @5
    @0
    @93
    @92
    cr
    wcel
    @64
    @94
    @6
    c.xi
    cX
    cW
    cphipfval.x
    cphipfval.i
    reipcl
    syl2anc
    eqeltrd
    recnd
    #
    mulid2d
    eqtrd
    oveq12d
    @5
    c4
    cn
    wcel
    @31
    @53
    wceq
    @5
    @30
    @52
    @47
    @53
    vk
    c3
    c1
    c4
    cn
    nnuz
    df-4
    @24
    c4
    wceq
    #
    @25
    c1
    @29
    @51
    cmul
    @96
    @25
    ci
    c4
    cexp
    co
    c1
    @24
    c4
    ci
    cexp
    oveq2
    i4
    syl6eq
    #
    @96
    @28
    @50
    c2
    cexp
    @96
    @27
    @49
    cN
    @96
    @26
    @48
    cA
    c.pl
    @96
    @25
    c1
    cB
    c.x
    @97
    oveq1d
    oveq2d
    fveq2d
    oveq1d
    oveq12d
    @5
    @24
    cn
    wcel
    #
    wa
    #
    @25
    @29
    @98
    @25
    cc
    wcel
    @5
    @98
    ci
    @24
    @60
    @98
    ax-icn
    a1i
    @24
    nnnn0
    #
    expcld
    adantl
    @99
    @29
    @27
    @27
    c.xi
    co
    #
    cc
    @99
    @0
    @27
    cX
    wcel
    #
    @29
    @101
    wceq
    @5
    @0
    @98
    @64
    adantr
    #
    @99
    @65
    @3
    @26
    cX
    wcel
    #
    @102
    @5
    @65
    @98
    @68
    adantr
    @5
    @3
    @98
    @69
    adantr
    @99
    @70
    @25
    cK
    wcel
    #
    @4
    @104
    @5
    @70
    @98
    @81
    adantr
    @5
    @82
    @1
    wa
    #
    @98
    @105
    @2
    @3
    @106
    @4
    @0
    @82
    @1
    @83
    anim1i
    3ad2ant1
    cF
    cK
    @24
    cW
    cphipval.f
    cphipval.k
    cmodscexp
    sylan
    @5
    @4
    @98
    @84
    adantr
    @25
    c.x
    cF
    cK
    cX
    cW
    cB
    cphipfval.x
    cphipval.f
    cphipfval.s
    cphipval.k
    lmodvscl
    syl3anc
    cX
    c.pl
    cW
    cA
    @26
    cphipfval.x
    cphipfval.p
    grpcl
    syl3anc
    #
    @27
    c.xi
    cN
    cX
    cW
    cphipfval.x
    cphipfval.i
    cphipfval.n
    nmsq
    syl2anc
    #
    @99
    @101
    @99
    @0
    @102
    @101
    cr
    wcel
    @103
    @107
    @27
    c.xi
    cX
    cW
    cphipfval.x
    cphipfval.i
    reipcl
    #
    syl2anc
    recnd
    eqeltrd
    #
    mulcld
    @5
    @30
    @46
    @40
    @47
    vk
    c2
    c1
    c3
    cn
    nnuz
    df-3
    @24
    c3
    wceq
    #
    @25
    @41
    @29
    @45
    cmul
    @111
    @25
    ci
    c3
    cexp
    co
    @41
    @24
    c3
    ci
    cexp
    oveq2
    i3
    syl6eq
    #
    @111
    @28
    @44
    c2
    cexp
    @111
    @27
    @43
    cN
    @111
    @26
    @42
    cA
    c.pl
    @111
    @25
    @41
    cB
    c.x
    @112
    oveq1d
    oveq2d
    fveq2d
    oveq1d
    oveq12d
    @99
    @25
    @29
    @99
    ci
    @24
    @60
    @99
    ax-icn
    a1i
    @98
    @24
    cn0
    wcel
    @5
    @100
    adantl
    expcld
    #
    @99
    @29
    @101
    cc
    @108
    @99
    @0
    @102
    @101
    cc
    wcel
    @103
    @107
    @0
    @102
    wa
    @101
    @109
    recnd
    syl2anc
    eqeltrd
    mulcld
    @5
    @30
    @39
    @33
    @40
    vk
    c1
    c1
    c2
    cn
    nnuz
    df-2
    @24
    c2
    wceq
    #
    @25
    @34
    @29
    @38
    cmul
    @114
    @25
    ci
    c2
    cexp
    co
    @34
    @24
    c2
    ci
    cexp
    oveq2
    i2
    syl6eq
    #
    @114
    @28
    @37
    c2
    cexp
    @114
    @27
    @36
    cN
    @114
    @26
    @35
    cA
    c.pl
    @114
    @25
    @34
    cB
    c.x
    @115
    oveq1d
    oveq2d
    fveq2d
    oveq1d
    oveq12d
    @99
    @25
    @29
    @113
    @110
    mulcld
    @5
    c1
    c1
    cfz
    co
    @30
    vk
    csu
    @33
    wceq
    #
    c1
    cn
    wcel
    @5
    c1
    cz
    wcel
    @59
    @116
    1z
    @76
    @30
    @33
    vk
    c1
    @24
    c1
    wceq
    #
    @25
    ci
    @29
    @17
    cmul
    @117
    @25
    ci
    c1
    cexp
    co
    #
    ci
    @24
    c1
    ci
    cexp
    oveq2
    @60
    @118
    ci
    wceq
    ax-icn
    ci
    exp1
    ax-mp
    syl6eq
    #
    @117
    @28
    @16
    c2
    cexp
    @117
    @27
    @15
    cN
    @117
    @26
    @14
    cA
    c.pl
    @117
    @25
    ci
    cB
    c.x
    @119
    oveq1d
    oveq2d
    fveq2d
    oveq1d
    oveq12d
    fsum1
    sylancr
    1nn
    jctil
    @5
    @40
    eqidd
    fsump1i
    @5
    @47
    eqidd
    fsump1i
    @5
    @53
    eqidd
    fsump1i
    simprd
    @5
    @23
    @54
    ci
    @20
    cmul
    co
    #
    cmin
    co
    #
    @8
    caddc
    co
    #
    @57
    @5
    @23
    @22
    @13
    caddc
    co
    @22
    @12
    cmin
    co
    #
    @8
    caddc
    co
    @122
    @5
    @13
    @22
    @5
    @8
    @12
    @95
    @5
    @12
    @5
    @12
    @10
    @10
    c.xi
    co
    #
    cr
    @5
    @0
    @10
    cX
    wcel
    #
    @12
    @124
    wceq
    @64
    @2
    @65
    @3
    @4
    @125
    @67
    cX
    cW
    @9
    cA
    cB
    cphipfval.x
    @32
    grpsubcl
    syl3an1
    #
    @10
    c.xi
    cN
    cX
    cW
    cphipfval.x
    cphipfval.i
    cphipfval.n
    nmsq
    syl2anc
    @5
    @0
    @125
    @124
    cr
    wcel
    @64
    @126
    @10
    c.xi
    cX
    cW
    cphipfval.x
    cphipfval.i
    reipcl
    syl2anc
    eqeltrd
    recnd
    #
    subcld
    @5
    ci
    @21
    @61
    @5
    @17
    @20
    @75
    @5
    @20
    @5
    @20
    @18
    @18
    c.xi
    co
    #
    cr
    @5
    @0
    @18
    cX
    wcel
    #
    @20
    @128
    wceq
    @64
    @5
    @65
    @3
    @66
    @129
    @68
    @69
    @73
    cX
    cW
    @9
    cA
    @14
    cphipfval.x
    @32
    grpsubcl
    syl3anc
    #
    @18
    c.xi
    cN
    cX
    cW
    cphipfval.x
    cphipfval.i
    cphipfval.n
    nmsq
    syl2anc
    @5
    @0
    @129
    @128
    cr
    wcel
    @64
    @130
    @18
    c.xi
    cX
    cW
    cphipfval.x
    cphipfval.i
    reipcl
    syl2anc
    eqeltrd
    recnd
    #
    subcld
    mulcld
    #
    addcomd
    @5
    @22
    @12
    @8
    @132
    @127
    @95
    subadd23d
    @5
    @123
    @121
    @8
    caddc
    @5
    @123
    @33
    @120
    cmin
    co
    #
    @12
    cmin
    co
    @121
    @5
    @22
    @133
    @12
    cmin
    @5
    @17
    @20
    ci
    @75
    @131
    @61
    subdir2d
    oveq1d
    @5
    @33
    @120
    @12
    @76
    @5
    ci
    @20
    @61
    @131
    mulcld
    #
    @127
    sub32d
    eqtrd
    oveq1d
    3eqtr2d
    @5
    @121
    @56
    @8
    caddc
    @5
    @54
    @120
    cneg
    #
    caddc
    co
    @121
    @56
    @5
    @54
    @120
    @5
    @33
    @12
    @76
    @127
    subcld
    @134
    negsubd
    @5
    @135
    @55
    @54
    caddc
    @5
    @55
    @135
    @5
    ci
    @20
    @61
    @131
    mulneg1d
    eqcomd
    oveq2d
    eqtr3d
    oveq1d
    eqtrd
    3eqtr4rd
    oveq1d
    eqtrd
end
