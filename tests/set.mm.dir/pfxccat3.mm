include "cword.mm"
include "wcel.mm"
include "wa.mm"
include "cc0.mm"
include "cfz.mm"
include "co.mm"
include "chash.mm"
include "cfv.mm"
include "caddc.mm"
include "cconcat.mm"
include "cop.mm"
include "csubstr.mm"
include "cle.mm"
include "wbr.mm"
include "cmin.mm"
include "cpfx.mm"
include "cif.mm"
include "wceq.mm"
include "simpll.mm"
include "simplrl.mm"
include "wi.mm"
include "cn0.mm"
include "lencl.mm"
include "elfznn0.mm"
include "adantr.mm"
include "simplr.mm"
include "breq2i.mm"
include "biimpi.mm"
include "adantl.mm"
include "elfz2nn0.mm"
include "syl3anbrc.mm"
include "exp31.mm"
include "syl5com.mm"
include "imp.mm"
include "jca.mm"
include "swrdccatin1.mm"
include "sylc.mm"
include "wn.mm"
include "w3a.mm"
include "simp1l.mm"
include "eleq1i.mm"
include "cz.mm"
include "nn0z.mm"
include "3ad2ant2.mm"
include "3ad2ant1.mm"
include "3jca.mm"
include "simpl3.mm"
include "anim1i.mm"
include "ancomd.mm"
include "elfz2.mm"
include "sylanbrc.mm"
include "sylbi.mm"
include "com12.mm"
include "sylbir.mm"
include "syl.mm"
include "a1d.mm"
include "3imp.mm"
include "syl5eqel.mm"
include "eqcomi.mm"
include "clt.mm"
include "cr.mm"
include "wb.mm"
include "nn0re.mm"
include "ltnle.mm"
include "syl2anr.mm"
include "bicomd.mm"
include "ltle.mm"
include "sylbid.mm"
include "ex.mm"
include "syl5bi.mm"
include "imp32.mm"
include "exp32.mm"
include "a1dd.mm"
include "swrdccatin2.mm"
include "syl2an.mm"
include "impcom.mm"
include "expcom.mm"
include "3adant3.mm"
include "simplr3.mm"
include "pfxccatin12.mm"
include "2if2.mm"

theorem pfxccat3
  let cA: class A
  let cB: class B
  let cL: class L
  let cM: class M
  let cN: class N
  let cV: class V
  let vk: setvar k
  let vx: setvar x
  assume pfxccatin12.l: |- L = ( # ` A )


  assert |- ( ( A e. Word V /\ B e. Word V ) -> ( ( M e. ( 0 ... N ) /\ N e. ( 0 ... ( L + ( # ` B ) ) ) ) -> ( ( A ++ B ) substr <. M , N >. ) = if ( N <_ L , ( A substr <. M , N >. ) , if ( L <_ M , ( B substr <. ( M - L ) , ( N - L ) >. ) , ( ( A substr <. M , L >. ) ++ ( B prefix ( N - L ) ) ) ) ) ) )

  proof
    cA
    cV
    cword
    #
    wcel
    #
    cB
    @0
    wcel
    #
    wa
    #
    cM
    cc0
    cN
    cfz
    co
    wcel
    #
    cN
    cc0
    cL
    cB
    chash
    cfv
    caddc
    co
    #
    cfz
    co
    wcel
    #
    wa
    #
    cA
    cB
    cconcat
    co
    cM
    cN
    cop
    #
    csubstr
    co
    #
    cN
    cL
    cle
    wbr
    #
    cA
    @8
    csubstr
    co
    #
    cL
    cM
    cle
    wbr
    #
    cB
    cM
    cL
    cmin
    co
    cN
    cL
    cmin
    co
    #
    cop
    csubstr
    co
    #
    cA
    cM
    cL
    cop
    csubstr
    co
    cB
    @13
    cpfx
    co
    cconcat
    co
    #
    cif
    cif
    wceq
    @3
    @7
    wa
    #
    @10
    @12
    @11
    @14
    @15
    @9
    @16
    @10
    wa
    #
    @3
    @4
    cN
    cc0
    cA
    chash
    cfv
    #
    cfz
    co
    wcel
    #
    wa
    @9
    @11
    wceq
    @3
    @7
    @10
    simpll
    @17
    @4
    @19
    @3
    @4
    @6
    @10
    simplrl
    @16
    @10
    @19
    @3
    @7
    @10
    @19
    wi
    #
    @1
    @7
    @20
    wi
    @2
    @1
    @18
    cn0
    wcel
    #
    @7
    @20
    cV
    cA
    lencl
    #
    @6
    @21
    @20
    wi
    @4
    @6
    @21
    @10
    @19
    @6
    @21
    wa
    #
    @10
    wa
    cN
    cn0
    wcel
    #
    @21
    cN
    @18
    cle
    wbr
    #
    @19
    @23
    @24
    @10
    @6
    @24
    @21
    cN
    @5
    elfznn0
    adantr
    adantr
    @6
    @21
    @10
    simplr
    @10
    @25
    @23
    @10
    @25
    cL
    @18
    cN
    cle
    pfxccatin12.l
    breq2i
    biimpi
    adantl
    cN
    @18
    elfz2nn0
    syl3anbrc
    exp31
    adantl
    syl5com
    adantr
    imp
    imp
    jca
    cA
    cB
    cM
    cN
    cV
    swrdccatin1
    sylc
    @16
    @10
    wn
    #
    @12
    w3a
    #
    @3
    cM
    cL
    cN
    cfz
    co
    wcel
    #
    cN
    cL
    @5
    cfz
    co
    wcel
    #
    wa
    @9
    @14
    wceq
    @3
    @7
    @26
    @12
    simp1l
    @27
    @28
    @29
    @16
    @26
    @12
    @28
    @16
    @12
    @28
    wi
    #
    @26
    @3
    @7
    @30
    @1
    @7
    @30
    wi
    #
    @2
    @1
    @21
    @31
    @22
    @21
    cL
    cn0
    wcel
    #
    @31
    cL
    @18
    cn0
    pfxccatin12.l
    eleq1i
    @7
    @32
    @30
    @4
    @32
    @30
    wi
    #
    @6
    @4
    cM
    cn0
    wcel
    #
    @24
    cM
    cN
    cle
    wbr
    #
    w3a
    #
    @33
    cM
    cN
    elfz2nn0
    #
    @36
    @32
    @12
    @28
    @36
    @32
    wa
    #
    @12
    wa
    #
    cL
    cz
    wcel
    #
    cN
    cz
    wcel
    #
    cM
    cz
    wcel
    #
    w3a
    #
    @12
    @35
    wa
    @28
    @38
    @43
    @12
    @38
    @40
    @41
    @42
    @32
    @40
    @36
    cL
    nn0z
    #
    adantl
    @36
    @41
    @32
    @24
    @34
    @41
    @35
    cN
    nn0z
    #
    3ad2ant2
    adantr
    @36
    @42
    @32
    @34
    @24
    @42
    @35
    cM
    nn0z
    3ad2ant1
    adantr
    3jca
    adantr
    @39
    @35
    @12
    @38
    @35
    @12
    @34
    @24
    @35
    @32
    simpl3
    anim1i
    ancomd
    cM
    cL
    cN
    elfz2
    sylanbrc
    exp31
    sylbi
    adantr
    com12
    sylbir
    syl
    adantr
    imp
    a1d
    3imp
    @16
    @26
    @12
    @29
    @16
    @26
    @29
    @12
    @3
    @7
    @26
    @29
    wi
    #
    @1
    @7
    @46
    wi
    @2
    @1
    @21
    @7
    @46
    @22
    @6
    @21
    @46
    wi
    #
    @4
    @6
    @24
    @5
    cn0
    wcel
    #
    cN
    @5
    cle
    wbr
    #
    w3a
    #
    @47
    cN
    @5
    elfz2nn0
    #
    @50
    @21
    @26
    @29
    @50
    @21
    @26
    wa
    #
    wa
    #
    @40
    @5
    cz
    wcel
    #
    @41
    w3a
    #
    cL
    cN
    cle
    wbr
    #
    @49
    wa
    #
    @29
    @53
    @40
    @54
    @41
    @52
    @40
    @50
    @21
    @40
    @26
    @21
    cL
    @18
    cz
    pfxccatin12.l
    @18
    nn0z
    syl5eqel
    adantr
    adantl
    @50
    @54
    @52
    @48
    @24
    @54
    @49
    @5
    nn0z
    3ad2ant2
    #
    adantr
    @50
    @41
    @52
    @24
    @48
    @41
    @49
    @45
    3ad2ant1
    #
    adantr
    3jca
    @53
    @56
    @49
    @50
    @21
    @26
    @56
    @24
    @48
    @21
    @26
    @56
    wi
    #
    wi
    @49
    @21
    @32
    @24
    @60
    @18
    cL
    cn0
    cL
    @18
    pfxccatin12.l
    eqcomi
    eleq1i
    #
    @24
    @32
    @60
    @24
    @32
    wa
    #
    @26
    cL
    cN
    clt
    wbr
    #
    @56
    @62
    @63
    @26
    @32
    cL
    cr
    wcel
    #
    cN
    cr
    wcel
    #
    @63
    @26
    wb
    @24
    cL
    nn0re
    #
    cN
    nn0re
    #
    cL
    cN
    ltnle
    #
    syl2anr
    bicomd
    @32
    @64
    @65
    @63
    @56
    wi
    #
    @24
    @66
    @67
    cL
    cN
    ltle
    #
    syl2anr
    sylbid
    ex
    syl5bi
    3ad2ant1
    imp32
    @24
    @48
    @49
    @52
    simpl3
    jca
    cN
    cL
    @5
    elfz2
    #
    sylanbrc
    exp32
    sylbi
    adantl
    syl5com
    adantr
    imp
    a1dd
    3imp
    jca
    cA
    cB
    cL
    cM
    cN
    cV
    pfxccatin12.l
    swrdccatin2
    sylc
    @16
    @26
    @12
    wn
    #
    w3a
    #
    @3
    cM
    cc0
    cL
    cfz
    co
    wcel
    #
    @29
    wa
    @9
    @15
    wceq
    @3
    @7
    @26
    @72
    simp1l
    @73
    @74
    @29
    @16
    @26
    @72
    @74
    @16
    @72
    @74
    wi
    #
    @26
    @3
    @7
    @75
    @1
    @7
    @75
    wi
    @2
    @1
    @21
    @7
    @75
    @22
    @4
    @21
    @75
    wi
    @6
    @21
    @32
    @4
    @75
    @61
    @4
    @36
    @32
    @75
    wi
    #
    @37
    @34
    @24
    @76
    @35
    @32
    @34
    @24
    wa
    #
    @75
    @32
    @77
    wa
    #
    @72
    cM
    cL
    clt
    wbr
    #
    @74
    @78
    @79
    @72
    @77
    cM
    cr
    wcel
    #
    @64
    @79
    @72
    wb
    @32
    @34
    @80
    @24
    cM
    nn0re
    #
    adantr
    @66
    cM
    cL
    ltnle
    syl2anr
    bicomd
    @77
    @32
    @79
    @74
    wi
    #
    @34
    @32
    @82
    wi
    @24
    @34
    @32
    @79
    @74
    @34
    @32
    wa
    #
    @79
    wa
    @34
    @32
    cM
    cL
    cle
    wbr
    #
    @74
    @34
    @32
    @79
    simpll
    @34
    @32
    @79
    simplr
    @83
    @79
    @84
    @34
    @80
    @64
    @79
    @84
    wi
    @32
    @81
    @66
    cM
    cL
    ltle
    syl2an
    imp
    cM
    cL
    elfz2nn0
    syl3anbrc
    exp31
    adantr
    impcom
    sylbid
    expcom
    3adant3
    sylbi
    syl5bi
    adantr
    syl5com
    adantr
    imp
    a1d
    3imp
    @16
    @26
    @72
    @29
    @16
    @26
    @29
    @72
    @7
    @3
    @46
    @6
    @3
    @46
    wi
    #
    @4
    @6
    @50
    @85
    @51
    @3
    @50
    @46
    @1
    @50
    @46
    wi
    #
    @2
    @1
    @21
    @86
    @22
    @21
    @32
    @86
    @61
    @32
    @50
    @46
    @32
    @50
    wa
    #
    @26
    @63
    @29
    @32
    @64
    @65
    @26
    @63
    wb
    @50
    @66
    @24
    @48
    @65
    @49
    @67
    3ad2ant1
    #
    @64
    @65
    wa
    @63
    @26
    @68
    bicomd
    syl2an
    @87
    @63
    @29
    @87
    @63
    wa
    #
    @55
    @57
    @29
    @87
    @55
    @63
    @87
    @40
    @54
    @41
    @32
    @40
    @50
    @44
    adantr
    @50
    @54
    @32
    @58
    adantl
    @50
    @41
    @32
    @59
    adantl
    3jca
    adantr
    @89
    @56
    @49
    @87
    @63
    @56
    @32
    @64
    @65
    @69
    @50
    @66
    @88
    @70
    syl2an
    imp
    @24
    @48
    @49
    @32
    @63
    simplr3
    jca
    @71
    sylanbrc
    ex
    sylbid
    ex
    sylbi
    syl
    adantr
    com12
    sylbi
    adantl
    impcom
    a1dd
    3imp
    jca
    cA
    cB
    cL
    cM
    cN
    cV
    pfxccatin12.l
    pfxccatin12
    sylc
    2if2
    ex
end
